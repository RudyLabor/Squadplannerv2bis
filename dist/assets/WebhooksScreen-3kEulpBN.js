import{c as N,r as v,j as e,P as k,m as l,Y as W,Z as C,V as A,C as S}from"./index-D_HhqbxM.js";import{A as w}from"./arrow-left-CFku1NrH.js";import{W as b}from"./webhook-CUCy_JWa.js";import{T as P}from"./trash-2-DiIqnes2.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=N("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);function E({onNavigate:o,showToast:a}){const[m,x]=v.useState([{id:"1",name:"Discord Notifications",url:"https://discord.com/api/webhooks/...",events:["session.created","session.confirmed","member.joined"],active:!0,lastTriggered:"Il y a 2h"},{id:"2",name:"Analytics Pipeline",url:"https://analytics.example.com/webhook",events:["session.completed","member.checkin"],active:!0,lastTriggered:"Il y a 5h"}]),[p,c]=v.useState(!1),[s,d]=v.useState({name:"",url:"",events:[]}),u=[{id:"session.created",label:"Session cr√©√©e",icon:"üìÖ"},{id:"session.confirmed",label:"Session confirm√©e",icon:"‚úÖ"},{id:"session.cancelled",label:"Session annul√©e",icon:"‚ùå"},{id:"session.completed",label:"Session termin√©e",icon:"üéÆ"},{id:"member.joined",label:"Membre rejoint",icon:"üëã"},{id:"member.left",label:"Membre parti",icon:"üëã"},{id:"member.checkin",label:"Check-in effectu√©",icon:"‚úì"},{id:"vote.created",label:"Vote cr√©√©",icon:"üó≥Ô∏è"}],h=t=>{x(i=>i.map(n=>n.id===t?{...n,active:!n.active}:n));const r=m.find(i=>i.id===t);a==null||a(r!=null&&r.active?"Webhook d√©sactiv√©":"Webhook activ√©",r!=null&&r.active?"info":"success")},y=t=>{x(r=>r.filter(i=>i.id!==t)),a==null||a("Webhook supprim√©","success")},g=()=>{if(!s.name||!s.url||s.events.length===0){a==null||a("Veuillez remplir tous les champs","error");return}const t={id:Date.now().toString(),name:s.name,url:s.url,events:s.events,active:!0};x(r=>[...r,t]),d({name:"",url:"",events:[]}),c(!1),a==null||a("Webhook cr√©√© avec succ√®s !","success")},f=t=>{d(r=>({...r,events:r.events.includes(t)?r.events.filter(i=>i!==t):[...r.events,t]}))};return e.jsxs("div",{className:"min-h-screen bg-[var(--background)] pb-20",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[var(--background)]/95 backdrop-blur-sm border-b border-[var(--border-subtle)]",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-4",children:[e.jsx("button",{onClick:()=>o==null?void 0:o("api-docs"),className:"p-2 hover:bg-[var(--background-elevated)] rounded-xl transition-colors",children:e.jsx(w,{className:"w-5 h-5 text-[var(--text-primary)]",strokeWidth:2})}),e.jsx("h1",{className:"text-lg font-semibold text-[var(--text-primary)]",children:"Webhooks"}),e.jsx("button",{onClick:()=>c(!0),className:"p-2 hover:bg-[var(--background-elevated)] rounded-xl transition-colors",children:e.jsx(k,{className:"w-5 h-5 text-[var(--primary-600)]",strokeWidth:2})})]})}),e.jsxs("div",{className:"px-4 py-6 space-y-6",children:[e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-3xl bg-gradient-to-br from-[var(--primary-500)] to-[var(--primary-600)] mb-4 shadow-lg",children:e.jsx(b,{className:"w-10 h-10 text-white",strokeWidth:2})}),e.jsx("h2",{className:"text-2xl font-bold text-[var(--text-primary)] mb-2",children:"Webhooks"}),e.jsx("p",{className:"text-[var(--text-secondary)] text-sm max-w-md mx-auto",children:"Recevez des notifications en temps r√©el pour les √©v√©nements"})]}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-br from-[var(--warning-50)] to-[var(--warning-100)] rounded-2xl p-4 border-[0.5px] border-[var(--warning-200)]",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(W,{className:"w-5 h-5 text-[var(--warning-600)] flex-shrink-0 mt-0.5",strokeWidth:2}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-[var(--warning-900)] mb-1",children:"Webhooks HTTP POST"}),e.jsx("p",{className:"text-xs text-[var(--warning-700)]",children:"Les webhooks envoient des requ√™tes POST √† vos endpoints. Assurez-vous qu'ils sont accessibles publiquement."})]})]})}),m.length>0?e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-3",children:m.map((t,r)=>e.jsxs(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3+r*.05},className:"bg-white rounded-2xl p-5 border-[0.5px] border-[var(--border-medium)] shadow-sm",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-xl ${t.active?"bg-gradient-to-br from-[var(--success-500)] to-[var(--success-600)]":"bg-[var(--background)]"} flex items-center justify-center shadow-sm`,children:e.jsx(C,{className:`w-6 h-6 ${t.active?"text-white":"text-[var(--text-tertiary)]"}`,strokeWidth:2})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-[var(--text-primary)]",children:t.name}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-lg ${t.active?"bg-[var(--success-50)] text-[var(--success-700)]":"bg-[var(--background)] text-[var(--text-tertiary)]"}`,children:t.active?"Actif":"Inactif"})]}),e.jsx("code",{className:"text-xs text-[var(--text-secondary)] font-mono block mb-2 truncate",children:t.url}),e.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:t.events.map(i=>{var n;return e.jsx("span",{className:"px-2 py-1 bg-[var(--primary-50)] text-[var(--primary-700)] text-xs rounded-lg",children:((n=u.find(j=>j.id===i))==null?void 0:n.label)||i},i)})}),t.lastTriggered&&e.jsxs("p",{className:"text-xs text-[var(--text-tertiary)]",children:["Dernier d√©clenchement : ",t.lastTriggered]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-[var(--border-subtle)]",children:[e.jsx("button",{onClick:()=>h(t.id),className:`flex-1 py-2 rounded-xl text-sm font-medium transition-colors ${t.active?"bg-[var(--background)] text-[var(--text-primary)] hover:bg-[var(--background-elevated)]":"bg-[var(--success-500)] text-white hover:bg-[var(--success-600)]"}`,children:t.active?"D√©sactiver":"Activer"}),e.jsx("button",{onClick:()=>a==null?void 0:a("Fonctionnalit√© bient√¥t disponible","info"),className:"p-2 hover:bg-[var(--background)] rounded-xl transition-colors",children:e.jsx(z,{className:"w-4 h-4 text-[var(--text-tertiary)]",strokeWidth:2})}),e.jsx("button",{onClick:()=>y(t.id),className:"p-2 hover:bg-[var(--error-50)] rounded-xl transition-colors",children:e.jsx(P,{className:"w-4 h-4 text-[var(--error-500)]",strokeWidth:2})})]})]},t.id))}):e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-[var(--background)] flex items-center justify-center mx-auto mb-4",children:e.jsx(b,{className:"w-10 h-10 text-[var(--text-tertiary)]",strokeWidth:2})}),e.jsx("p",{className:"text-[var(--text-secondary)] text-sm mb-4",children:"Aucun webhook configur√©"}),e.jsx("button",{onClick:()=>c(!0),className:"px-5 py-2.5 bg-[var(--primary-600)] text-white rounded-xl text-sm font-medium hover:bg-[var(--primary-700)] transition-colors",children:"Cr√©er un webhook"})]})]}),e.jsx(A,{children:p&&e.jsxs(e.Fragment,{children:[e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>c(!1),className:"fixed inset-0 bg-black/50 z-40"}),e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed inset-x-4 top-20 z-50 bg-white rounded-3xl p-6 shadow-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold text-[var(--text-primary)] mb-4",children:"Nouveau webhook"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[var(--text-secondary)] mb-2",children:"Nom"}),e.jsx("input",{type:"text",value:s.name,onChange:t=>d({...s,name:t.target.value}),placeholder:"Discord Notifications",className:"w-full px-4 py-3 bg-[var(--background)] rounded-xl text-[var(--text-primary)] placeholder:text-[var(--text-tertiary)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-500)]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[var(--text-secondary)] mb-2",children:"URL"}),e.jsx("input",{type:"url",value:s.url,onChange:t=>d({...s,url:t.target.value}),placeholder:"https://example.com/webhook",className:"w-full px-4 py-3 bg-[var(--background)] rounded-xl text-[var(--text-primary)] placeholder:text-[var(--text-tertiary)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-500)]"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[var(--text-secondary)] mb-2",children:["√âv√©nements (",s.events.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:u.map(t=>e.jsxs("button",{onClick:()=>f(t.id),className:`w-full flex items-center justify-between p-3 rounded-xl transition-all ${s.events.includes(t.id)?"bg-[var(--primary-50)] border-2 border-[var(--primary-500)]":"bg-[var(--background)] border-2 border-transparent"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:t.icon}),e.jsx("span",{className:"text-sm font-medium text-[var(--text-primary)]",children:t.label})]}),s.events.includes(t.id)&&e.jsx(S,{className:"w-5 h-5 text-[var(--primary-600)]",strokeWidth:2.5})]},t.id))})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>c(!1),className:"flex-1 py-3 bg-[var(--background)] text-[var(--text-primary)] rounded-xl font-medium hover:bg-[var(--background-elevated)] transition-colors",children:"Annuler"}),e.jsx("button",{onClick:g,className:"flex-1 py-3 bg-[var(--primary-600)] text-white rounded-xl font-medium hover:bg-[var(--primary-700)] transition-colors",children:"Cr√©er"})]})]})]})})]})}export{E as WebhooksScreen,E as default};
