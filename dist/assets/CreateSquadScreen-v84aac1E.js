import{x as F,r as s,j as e,C as g,m as M,D as $,A as J}from"./index-D_HhqbxM.js";import{B as m}from"./button-LWl2mh07.js";import{I as V}from"./input-CcRrkoAc.js";import{c as f,G as z}from"./GamePicker-Be3Z3rQN.js";import{I as j}from"./ImageWithFallback-C-S-nwbk.js";import{A as y}from"./arrow-left-CFku1NrH.js";import{C as B}from"./copy-ncj01xiF.js";import{G as O}from"./gamepad-2-hq8iF7Kb.js";const Y=[{value:"Europe/Paris",label:"Paris (CET/CEST)"},{value:"Europe/London",label:"London (GMT/BST)"},{value:"America/New_York",label:"New York (EST/EDT)"},{value:"America/Los_Angeles",label:"Los Angeles (PST/PDT)"},{value:"America/Chicago",label:"Chicago (CST/CDT)"},{value:"Asia/Tokyo",label:"Tokyo (JST)"},{value:"Australia/Sydney",label:"Sydney (AEDT/AEST)"}],w=[{value:"monday",label:"Lun",full:"Lundi"},{value:"tuesday",label:"Mar",full:"Mardi"},{value:"wednesday",label:"Mer",full:"Mercredi"},{value:"thursday",label:"Jeu",full:"Jeudi"},{value:"friday",label:"Ven",full:"Vendredi"},{value:"saturday",label:"Sam",full:"Samedi"},{value:"sunday",label:"Dim",full:"Dimanche"}];function re({onNavigate:d,showToast:n}){const{t:_}=F(),[N,k]=s.useState("setup"),[l,C]=s.useState(""),[a,S]=s.useState(null),[q,x]=s.useState(!1),[u,L]=s.useState("Europe/Paris"),[h,D]=s.useState("2"),[t,T]=s.useState([]),[A,b]=s.useState(!1),[v,p]=s.useState(!1),[i,E]=s.useState(null),I=r=>{T(o=>o.includes(r)?o.filter(c=>c!==r):[...o,r])},P=async()=>{if(!l||!a){n("Veuillez remplir tous les champs","error");return}p(!0);try{const{squad:r}=await J.createSquad({name:l,game:a.name,avatar:a.image,description:`Squad ${a.name} • ${t.length>0?t.map(o=>{var c;return(c=w.find(W=>W.value===o))==null?void 0:c.full}).join(", "):"Flexible"}`,timezone:u,sessionDuration:parseInt(h),preferredDays:t});E(r.id),k("invite"),n("Squad créée avec succès !","success")}catch(r){console.error("Create squad error:",r),n(r.message||"Erreur lors de la création de la squad","error")}finally{p(!1)}},G=async()=>{const r=i?`https://squadplanner.app/join/${i}`:"https://squadplanner.app/invite/abc123";await navigator.clipboard.writeText(r),b(!0),n("Lien copié !","success"),setTimeout(()=>b(!1),2e3)};return N==="invite"?e.jsx("div",{className:"min-h-screen pb-24 pt-safe bg-[var(--bg-base)]",children:e.jsxs("div",{className:"px-4 py-8 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-10",children:[e.jsx("button",{onClick:()=>d("squads"),className:"w-12 h-12 rounded-2xl bg-white border-[0.5px] border-[var(--border-medium)] flex items-center justify-center hover:border-[var(--border-strong)] shadow-sm transition-all",children:e.jsx(y,{className:"w-5 h-5 text-[var(--fg-primary)]",strokeWidth:2})}),e.jsx("h1",{className:"text-2xl font-semibold text-[var(--fg-primary)] tracking-tight",children:"Inviter des joueurs"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[var(--primary-50)] to-white rounded-3xl p-8 mb-8 border-[0.5px] border-[var(--primary-200)] shadow-lg",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-[var(--primary-500)] to-[var(--primary-600)] flex items-center justify-center mb-5 shadow-lg shadow-[var(--primary-500)]/20",children:e.jsx(g,{className:"w-8 h-8 text-white",strokeWidth:2.5})}),e.jsx("h2",{className:"text-2xl font-semibold text-[var(--fg-primary)] mb-3 tracking-tight",children:"Squad créée !"}),e.jsx("p",{className:"text-base text-[var(--fg-secondary)]",children:"Partagez ce lien avec vos amis pour les inviter."})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 border-[0.5px] border-[var(--border-subtle)] shadow-md mb-6",children:[e.jsx("label",{className:"text-sm font-semibold text-[var(--fg-secondary)] mb-3 block",children:"Lien d'invitation"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:i?`https://squadplanner.app/join/${i}`:"https://squadplanner.app/invite/abc123",readOnly:!0,className:"flex-1 px-4 py-3 rounded-xl border-[0.5px] border-[var(--border-medium)] bg-[var(--bg-subtle)] text-sm text-[var(--fg-secondary)] font-mono"}),e.jsx(m,{variant:"default",onClick:G,className:"px-6 bg-gradient-to-br from-[var(--primary-500)] to-[var(--primary-600)] text-white rounded-xl shadow-lg shadow-[var(--primary-500)]/20",children:A?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"w-4 h-4",strokeWidth:2}),"Copié"]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-4 h-4",strokeWidth:2}),"Copier"]})})]})]}),a&&e.jsx("div",{className:"bg-white rounded-3xl overflow-hidden border-[0.5px] border-[var(--border-subtle)] shadow-md mb-6",children:e.jsxs("div",{className:"aspect-video relative",children:[e.jsx(j,{src:a.image,alt:a.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent"}),e.jsxs("div",{className:"absolute bottom-6 left-6 right-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2 tracking-tight",children:l}),e.jsxs("div",{className:"flex items-center gap-3 text-white/90",children:[e.jsx("span",{className:"text-sm font-medium",children:a.name}),e.jsx("span",{className:"text-sm",children:"•"}),e.jsx("span",{className:"text-sm font-medium",children:f[a.category]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(m,{variant:"secondary",onClick:()=>d("squads"),className:"h-14 rounded-xl border-[0.5px] border-[var(--border-medium)] shadow-sm",children:"Voir mes squads"}),e.jsx(m,{variant:"primary",onClick:()=>i&&d("squad-detail",{id:i}),className:"h-14 bg-gradient-to-br from-[var(--primary-500)] to-[var(--primary-600)] text-white rounded-xl shadow-lg shadow-[var(--primary-500)]/20",children:"Ouvrir la squad"})]})]})}):e.jsxs("div",{className:"min-h-screen pb-24 pt-safe bg-[var(--bg-base)]",children:[e.jsxs("div",{className:"px-4 py-8 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-10",children:[e.jsx("button",{onClick:()=>d("home"),className:"w-12 h-12 rounded-2xl bg-white border-[0.5px] border-[var(--border-medium)] flex items-center justify-center hover:border-[var(--border-strong)] shadow-sm transition-all",children:e.jsx(y,{className:"w-5 h-5 text-[var(--fg-primary)]",strokeWidth:2})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-[var(--fg-primary)] tracking-tight",children:"Créer une Squad"}),e.jsx("p",{className:"text-sm text-[var(--fg-tertiary)] mt-1",children:"Configure ta nouvelle équipe en 2 minutes"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-semibold text-[var(--fg-secondary)] mb-3 block",children:"Nom de la Squad"}),e.jsx(V,{value:l,onChange:r=>C(r.target.value),placeholder:"Les Légendes",className:"h-14 rounded-xl border-[0.5px] border-[var(--border-medium)] focus:border-[var(--primary-500)] text-base",maxLength:30}),e.jsxs("p",{className:"text-xs text-[var(--fg-tertiary)] mt-2",children:[l.length,"/30 caractères"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-semibold text-[var(--fg-secondary)] mb-3 block",children:"Jeu Principal"}),a?e.jsx(M.button,{onClick:()=>x(!0),className:"w-full bg-white rounded-2xl overflow-hidden border-[0.5px] border-[var(--border-subtle)] shadow-sm hover:shadow-md transition-all",whileHover:{y:-2},children:e.jsxs("div",{className:"aspect-video relative",children:[e.jsx(j,{src:a.image,alt:a.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),e.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:a.name}),e.jsxs("p",{className:"text-sm text-white/80",children:[f[a.category]," • ",a.players]})]}),e.jsx("div",{className:"absolute top-4 right-4 px-3 py-1.5 rounded-xl bg-white/20 backdrop-blur-xl border border-white/30",children:e.jsx("span",{className:"text-xs font-semibold text-white",children:"Modifier"})})]})}):e.jsxs("button",{onClick:()=>x(!0),className:"w-full h-32 rounded-2xl border-2 border-dashed border-[var(--border-medium)] hover:border-[var(--primary-500)] bg-white hover:bg-[var(--primary-50)] transition-all flex flex-col items-center justify-center gap-3 group",children:[e.jsx(O,{className:"w-10 h-10 text-[var(--fg-tertiary)] group-hover:text-[var(--primary-500)] transition-colors",strokeWidth:1.5}),e.jsx("span",{className:"text-sm font-semibold text-[var(--fg-tertiary)] group-hover:text-[var(--primary-500)] transition-colors",children:"Choisir un jeu"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-semibold text-[var(--fg-secondary)] mb-3 block",children:"Jours de jeu préférés (optionnel)"}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:w.map(r=>e.jsx("button",{onClick:()=>I(r.value),className:`aspect-square rounded-xl text-xs font-semibold transition-all duration-200 ${t.includes(r.value)?"bg-gradient-to-br from-[var(--primary-500)] to-[var(--primary-600)] text-white shadow-md shadow-[var(--primary-500)]/20":"bg-white border-[0.5px] border-[var(--border-medium)] text-[var(--fg-secondary)] hover:border-[var(--primary-300)] hover:bg-[var(--primary-50)]"}`,children:r.label},r.value))}),t.length>0&&e.jsxs("p",{className:"text-xs text-[var(--fg-tertiary)] mt-2",children:[t.length," jour",t.length>1?"s":""," sélectionné",t.length>1?"s":""]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-semibold text-[var(--fg-secondary)] mb-3 block",children:"Fuseau horaire"}),e.jsx("select",{value:u,onChange:r=>L(r.target.value),className:"w-full h-14 px-4 rounded-xl border-[0.5px] border-[var(--border-medium)] focus:border-[var(--primary-500)] focus:outline-none text-base bg-white",children:Y.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{className:"text-sm font-semibold text-[var(--fg-secondary)] mb-3 block",children:"Durée typique des sessions"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:["1","2","3","4"].map(r=>e.jsxs("button",{onClick:()=>D(r),className:`h-14 rounded-xl text-sm font-semibold transition-all duration-200 ${h===r?"bg-gradient-to-br from-[var(--secondary-500)] to-[var(--secondary-600)] text-white shadow-md shadow-[var(--secondary-500)]/20":"bg-white border-[0.5px] border-[var(--border-medium)] text-[var(--fg-secondary)] hover:border-[var(--secondary-300)] hover:bg-[var(--secondary-50)]"}`,children:[r,"h"]},r))})]}),e.jsx(m,{variant:"primary",onClick:P,disabled:!l||!a||v,className:"w-full h-14 text-base font-semibold bg-gradient-to-br from-[var(--primary-500)] to-[var(--primary-600)] hover:from-[var(--primary-600)] hover:to-[var(--primary-700)] text-white rounded-xl shadow-lg shadow-[var(--primary-500)]/20 hover:shadow-xl hover:shadow-[var(--primary-500)]/30 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Création en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-5 h-5",strokeWidth:2}),"Créer la Squad"]})})]}),e.jsx(z,{isOpen:q,onClose:()=>x(!1),onSelect:S,selectedGame:a})]})}export{re as CreateSquadScreen,re as default};
