import{c as j,x as w,u as N,r as a,y as S,A as k,j as e,S as C,P as L,D as d,m as h,T as A}from"./index-D_HhqbxM.js";import{B as q}from"./button-LWl2mh07.js";import{E as p}from"./EmptyState-CPoNkjdP.js";import{I as W}from"./ImageWithFallback-C-S-nwbk.js";import{m as I}from"./mockData-CmE002oF.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=j("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);function T({onNavigate:t,useMockData:c=!1}){const{t:u}=w(),{isAuthenticated:i,isLoading:o}=N(),[l,f]=a.useState(""),[m,n]=a.useState([]),[v,r]=a.useState(!0);S("SquadsScreen"),a.useEffect(()=>{c?(n(I),r(!1)):!o&&i?(console.log("✅ Auth ready, loading squads..."),b()):!o&&!i&&(console.log("⚠️ Not authenticated, skipping squad load"),r(!1))},[o,i,c]);const b=async()=>{r(!0);try{const{squads:s}=await k.getSquads();console.log("✅ Squads loaded:",(s==null?void 0:s.length)||0),n(s||[])}catch(s){console.error("❌ Load squads error:",(s==null?void 0:s.message)||s),n([])}finally{r(!1)}},x=m.filter(s=>s.name.toLowerCase().includes(l.toLowerCase())||s.game.toLowerCase().includes(l.toLowerCase())),g=s=>s>=90?"text-[var(--success-600)] bg-gradient-to-br from-[var(--success-50)] to-[var(--success-100)] border-[var(--success-200)]":s>=75?"text-[var(--primary-600)] bg-gradient-to-br from-[var(--primary-50)] to-[var(--primary-100)] border-[var(--primary-200)]":"text-[var(--warning-600)] bg-gradient-to-br from-[var(--warning-50)] to-[var(--warning-100)] border-[var(--warning-200)]";return e.jsx("div",{className:"min-h-screen pb-24 pt-safe",children:e.jsxs("div",{className:"px-4 py-8 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-semibold text-[var(--fg-primary)] mb-2 tracking-tight",children:u("squads.title")}),e.jsxs("p",{className:"text-base text-[var(--fg-tertiary)] font-medium",children:[m.length," squads actives"]})]}),e.jsxs("div",{className:"flex gap-3 mb-8",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(C,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[var(--fg-tertiary)]",strokeWidth:1.5}),e.jsx("input",{type:"text",placeholder:"Rechercher des squads...",value:l,onChange:s=>f(s.target.value),className:"w-full h-12 pl-12 pr-4 bg-white border-[0.5px] border-[var(--border-medium)] rounded-2xl text-sm text-[var(--fg-primary)] placeholder:text-[var(--fg-tertiary)] focus:border-[var(--primary-500)] focus:ring-2 focus:ring-[var(--primary-500)]/20 transition-all shadow-sm"})]}),e.jsx(q,{variant:"default",onClick:()=>t("create-squad"),className:"h-12 px-5 bg-gradient-to-br from-[var(--primary-500)] to-[var(--primary-600)] hover:from-[var(--primary-600)] hover:to-[var(--primary-700)] text-white rounded-2xl shadow-lg shadow-[var(--primary-500)]/20",children:e.jsx(L,{className:"w-5 h-5",strokeWidth:2})})]}),v?e.jsx(p,{icon:d,title:"Chargement...",description:"Récupération de vos squads"}):x.length===0?e.jsx(p,{icon:d,title:"Crée ta première squad",description:"Rassemble tes mates et organisez vos sessions",actionLabel:"Créer ma squad",onAction:()=>t("create-squad")}):e.jsx("div",{className:"grid grid-cols-2 gap-4",children:x.map((s,y)=>e.jsx(h.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:y*.05},children:e.jsxs(h.div,{className:"bg-white rounded-2xl border-[0.5px] border-[var(--border-subtle)] shadow-sm hover:shadow-xl cursor-pointer overflow-hidden group",onClick:()=>t("squad-detail",{squadId:s.id}),whileHover:{y:-4},transition:{duration:.2},children:[e.jsxs("div",{className:"relative h-24 bg-gradient-to-br from-[var(--bg-base)] to-white border-b border-[var(--border-subtle)]",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 rounded-2xl overflow-hidden border-2 border-white shadow-lg",children:e.jsx(W,{src:s.gameImage,alt:s.game,className:"w-full h-full object-cover"})})}),s.onlineMembers>0&&e.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2 py-1 rounded-full bg-[var(--success-500)] text-white text-xs font-bold shadow-sm",children:[e.jsx(M,{className:"w-3 h-3",strokeWidth:2.5}),s.onlineMembers]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-base font-bold text-[var(--fg-primary)] mb-1 truncate group-hover:text-[var(--primary-600)] transition-colors",children:s.name}),e.jsx("p",{className:"text-xs text-[var(--fg-tertiary)] font-medium mb-4 truncate",children:s.game}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-[var(--fg-tertiary)] font-medium flex items-center gap-1.5",children:[e.jsx(d,{className:"w-3.5 h-3.5",strokeWidth:2}),"Membres"]}),e.jsx("span",{className:"text-xs font-bold text-[var(--fg-primary)]",children:s.members})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-[var(--fg-tertiary)] font-medium flex items-center gap-1.5",children:[e.jsx(A,{className:"w-3.5 h-3.5",strokeWidth:2}),"Fiabilité"]}),e.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full border ${g(s.reliability)}`,children:[s.reliability,"%"]})]})]}),e.jsx("div",{className:`pt-3 border-t border-[var(--border-subtle)] ${s.isActive?"bg-gradient-to-r from-[var(--primary-50)] to-[var(--primary-100)] -mx-4 -mb-4 px-4 pb-4 mt-3":""}`,children:e.jsxs("div",{className:"flex items-center gap-1.5 text-xs",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${s.isActive?"bg-[var(--primary-500)] animate-pulse":"bg-[var(--fg-tertiary)]/30"}`}),e.jsx("span",{className:`font-semibold ${s.isActive?"text-[var(--primary-700)]":"text-[var(--fg-tertiary)]"}`,children:s.nextSession})]})})]})]})},s.id))})]})})}export{T as SquadsScreen,T as default};
