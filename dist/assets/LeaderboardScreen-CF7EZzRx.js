import{J as w,r as a,Q as k,j as e,E as C,Z as S,m as x}from"./index-D_HhqbxM.js";import{c as T}from"./mockData-CmE002oF.js";import{A as E}from"./arrow-left-CFku1NrH.js";import{T as L}from"./target-B7vXcHB_.js";import{C as U}from"./crown-CCWAShGM.js";import{M as b}from"./medal-Cth3ap8M.js";function M({onNavigate:h,showToast:v,useMockData:l=!1}){const{user:o}=w(),[d,f]=a.useState("global"),[m,p]=a.useState("month"),[u,n]=a.useState([]),[$,t]=a.useState(!0);a.useEffect(()=>{l?(n(T),t(!1)):y()},[l,d,m]);const y=async()=>{t(!0);try{const s=((await k.getLeaderboard()).leaderboard||[]).map(c=>({...c,isCurrentUser:c.userId===(o==null?void 0:o.id)}));n(s),t(!1)}catch(r){console.error("Error loading leaderboard:",r),v(r.message||"Erreur lors du chargement du classement","error"),n([]),t(!1)}},g=[{key:"global",label:"Global",icon:C},{key:"game",label:"Par jeu",icon:L},{key:"squads",label:"Squads",icon:S}],j=[{key:"week",label:"Semaine"},{key:"month",label:"Mois"},{key:"all",label:"All-time"}],N=r=>r===1?{icon:U,color:"text-[var(--primary-500)]",bg:"bg-[var(--primary-50)]"}:r===2?{icon:b,color:"text-[var(--secondary-400)]",bg:"bg-[var(--secondary-50)]"}:r===3?{icon:b,color:"text-[var(--primary-300)]",bg:"bg-[var(--primary-50)]"}:null;return e.jsx("div",{className:"min-h-screen pb-24 pt-safe",children:e.jsxs("div",{className:"px-4 py-8 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("button",{onClick:()=>h("home"),className:"w-12 h-12 rounded-2xl bg-white border-[0.5px] border-[var(--border-medium)] flex items-center justify-center hover:border-[var(--border-strong)] shadow-sm transition-all",children:e.jsx(E,{className:"w-5 h-5 text-[var(--fg-primary)]",strokeWidth:2})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-[var(--fg-primary)] tracking-tight",children:"Classements"}),e.jsx("p",{className:"text-sm text-[var(--fg-tertiary)] font-medium mt-1",children:"Les meilleurs joueurs du moment"})]})]}),e.jsx("div",{className:"flex gap-2 mb-6 bg-white rounded-2xl p-1.5 border-[0.5px] border-[var(--border-subtle)] shadow-sm",children:g.map(r=>{const i=r.icon;return e.jsxs("button",{onClick:()=>f(r.key),className:`flex-1 px-4 py-2.5 rounded-xl font-semibold text-sm transition-all duration-200 flex items-center justify-center gap-2 ${d===r.key?"bg-gradient-to-br from-[var(--primary-500)] to-[var(--primary-600)] text-white shadow-lg shadow-[var(--primary-500)]/20":"text-[var(--fg-secondary)] hover:text-[var(--fg-primary)]"}`,children:[e.jsx(i,{className:"w-4 h-4",strokeWidth:2}),r.label]},r.key)})}),e.jsx("div",{className:"flex gap-2 mb-6",children:j.map(r=>e.jsx("button",{onClick:()=>p(r.key),className:`px-4 py-2 rounded-xl text-sm font-semibold transition-all ${m===r.key?"bg-[var(--primary-50)] text-[var(--primary-500)] border-[0.5px] border-[var(--primary-200)]":"bg-white text-[var(--fg-secondary)] border-[0.5px] border-[var(--border-subtle)] hover:border-[var(--border-medium)]"}`,children:r.label},r.key))}),e.jsx("div",{className:"space-y-3",children:u.map((r,i)=>{const s=N(r.rank);return e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.05},className:`bg-white rounded-2xl p-4 border-[0.5px] transition-all duration-200 ${r.isCurrentUser?"border-[var(--primary-500)] shadow-md ring-2 ring-[var(--primary-100)]":"border-[var(--border-subtle)] shadow-sm hover:shadow-md"}`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-12 text-center",children:s?e.jsx("div",{className:`w-10 h-10 rounded-xl ${s.bg} flex items-center justify-center mx-auto`,children:e.jsx(s.icon,{className:`w-5 h-5 ${s.color}`,strokeWidth:2})}):e.jsx("div",{className:"text-2xl font-bold text-[var(--fg-secondary)]",children:r.rank})}),e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-[var(--primary-500)] to-[var(--secondary-500)] flex items-center justify-center text-white font-bold text-lg flex-shrink-0",children:r.name[0]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`text-sm font-semibold truncate ${r.isCurrentUser?"text-[var(--primary-500)]":"text-[var(--fg-primary)]"}`,children:r.name}),r.isCurrentUser&&e.jsx("span",{className:"px-2 py-0.5 bg-[var(--primary-500)] text-white text-xs font-bold rounded-md",children:"TOI"})]}),e.jsxs("div",{className:"text-xs text-[var(--fg-tertiary)] font-medium mt-0.5",children:[r.totalSessions," sessions jou√©es"]})]}),e.jsx("div",{className:"flex items-center gap-3 flex-shrink-0",children:e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-[var(--fg-primary)]",children:[r.reliabilityScore,"%"]}),e.jsx("div",{className:"text-xs text-[var(--fg-tertiary)] font-medium",children:"fiabilit√©"})]})})]})},r.rank)})}),e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"mt-6 bg-gradient-to-br from-[var(--primary-50)] to-[var(--secondary-50)] rounded-2xl p-5 border-[0.5px] border-[var(--primary-100)]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-[var(--fg-primary)] mb-1",children:"Ta position actuelle"}),e.jsx("div",{className:"text-xs text-[var(--fg-secondary)] font-medium",children:"Tu as progress√© de 3 places cette semaine ! üî•"})]}),e.jsx("div",{className:"text-3xl font-bold text-[var(--primary-500)]",children:"#4"})]})})]})})}export{M as LeaderboardScreen,M as default};
