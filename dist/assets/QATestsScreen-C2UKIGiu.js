import{c as $,r as N,j as s,a1 as c,$ as D,I as P,H}from"./index-D_HhqbxM.js";import{B as p}from"./button-LWl2mh07.js";import{A as R}from"./arrow-left-CFku1NrH.js";import{L as k}from"./loader-circle-VeWgTqnN.js";import{B as F}from"./beaker-rl39vNQt.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=$("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);function Q({onNavigate:x,showToast:f}){const[v,b]=N.useState(!1),[n,S]=N.useState([{name:"Smart Suggestions - Affichage normal",status:"pending"},{name:"Smart Suggestions - Empty state",status:"pending"},{name:"Notifications - Liste affichÃ©e",status:"pending"},{name:"Notifications - Mark as read",status:"pending"},{name:"Heatmap - GÃ©nÃ©ration matrice 7x24",status:"pending"},{name:"Heatmap - Valeurs normalisÃ©es",status:"pending"},{name:"Members Stats - Batch loading",status:"pending"}]),t=(r,i)=>{S(u=>u.map((o,m)=>m===r?{...o,...i}:o))},A=async()=>{b(!0),t(0,{status:"running"});const r=Date.now();try{const e=await c.getSmartSuggestions("test-squad-123"),a=Date.now()-r;e.suggestions&&Array.isArray(e.suggestions)?t(0,{status:"passed",duration:a,details:`${e.suggestions.length} suggestions retournÃ©es`}):t(0,{status:"failed",error:"Format de rÃ©ponse invalide",duration:a})}catch(e){t(0,{status:"failed",error:e.message,duration:Date.now()-r})}await new Promise(e=>setTimeout(e,500)),t(1,{status:"running"});const i=Date.now();try{const e=await c.getSmartSuggestions("empty-squad"),a=Date.now()-i;e.suggestions&&e.suggestions.length===0?t(1,{status:"passed",duration:a,details:"Empty state gÃ©rÃ© correctement"}):t(1,{status:"failed",error:"Devrait retourner tableau vide",duration:a})}catch(e){e.message.includes("introuvable")?t(1,{status:"passed",duration:Date.now()-i,details:"404 pour squad inexistante (comportement attendu)"}):t(1,{status:"failed",error:e.message,duration:Date.now()-i})}await new Promise(e=>setTimeout(e,500)),t(2,{status:"running"});const u=Date.now();try{const e=localStorage.getItem("userId")||"test-user-id",a=await D.getUserNotifications(e),l=Date.now()-u;a.notifications&&Array.isArray(a.notifications)?t(2,{status:"passed",duration:l,details:`${a.notifications.length} notifications, ${a.unreadCount} non lues`}):t(2,{status:"failed",error:"Format de rÃ©ponse invalide",duration:l})}catch(e){t(2,{status:"failed",error:e.message,duration:Date.now()-u})}await new Promise(e=>setTimeout(e,500)),t(3,{status:"running"});const o=Date.now();try{const e=await D.markAsRead("test-notif-id"),a=Date.now()-o;e.notification||e.message?t(3,{status:"passed",duration:a,details:"Mark as read fonctionne"}):t(3,{status:"failed",error:"RÃ©ponse invalide",duration:a})}catch(e){e.message.includes("introuvable")?t(3,{status:"passed",duration:Date.now()-o,details:"404 pour notification inexistante (comportement attendu)"}):t(3,{status:"failed",error:e.message,duration:Date.now()-o})}await new Promise(e=>setTimeout(e,500)),t(4,{status:"running"});const m=Date.now();try{const e=await c.getAvailabilityHeatmap("test-squad-123"),a=Date.now()-m;e.heatmap&&e.heatmap.length===7?e.heatmap.every(d=>d.length===24)?t(4,{status:"passed",duration:a,details:`Matrice 7x24 correcte, ${e.sessionsCount} sessions analysÃ©es`}):t(4,{status:"failed",error:"Matrice incorrecte",duration:a}):t(4,{status:"failed",error:"Format de heatmap invalide",duration:a})}catch(e){t(4,{status:"failed",error:e.message,duration:Date.now()-m})}await new Promise(e=>setTimeout(e,500)),t(5,{status:"running"});const w=Date.now();try{const e=await c.getAvailabilityHeatmap("test-squad-123"),a=Date.now()-w;e.heatmap.flat().every(j=>j>=0&&j<=100)?t(5,{status:"passed",duration:a,details:"Toutes les valeurs entre 0-100"}):t(5,{status:"failed",error:"Valeurs hors limites 0-100",duration:a})}catch(e){t(5,{status:"failed",error:e.message,duration:Date.now()-w})}await new Promise(e=>setTimeout(e,500)),t(6,{status:"running"});const y=Date.now();try{const e=await c.getMembersStats("test-squad-123"),a=Date.now()-y;e.members&&Array.isArray(e.members)?e.members.every(d=>d.userId&&d.reliabilityScore!==void 0&&d.totalSessions!==void 0)?t(6,{status:"passed",duration:a,details:`${e.members.length} membres chargÃ©s en ${a}ms`}):t(6,{status:"failed",error:"Champs requis manquants",duration:a}):t(6,{status:"failed",error:"Format de rÃ©ponse invalide",duration:a})}catch(e){t(6,{status:"failed",error:e.message,duration:Date.now()-y})}b(!1);const g=n.filter(e=>e.status==="passed").length,h=n.length;g===h?f(`âœ… Tous les tests passÃ©s (${g}/${h})`,"success"):f(`âš ï¸ ${g}/${h} tests passÃ©s`,"error")},C=r=>{switch(r){case"passed":return s.jsx(H,{className:"w-5 h-5 text-[var(--success-500)]",strokeWidth:2});case"failed":return s.jsx(P,{className:"w-5 h-5 text-[var(--error-500)]",strokeWidth:2});case"running":return s.jsx(k,{className:"w-5 h-5 text-[var(--primary-500)] animate-spin",strokeWidth:2});default:return s.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-[var(--border-medium)]"})}},T=n.filter(r=>r.status==="passed").length,q=n.filter(r=>r.status==="failed").length,I=n.length;return s.jsx("div",{className:"min-h-screen pb-24 pt-safe bg-[var(--bg-base)]",children:s.jsxs("div",{className:"px-4 py-8 max-w-2xl mx-auto",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[s.jsx("button",{onClick:()=>x("home"),className:"w-10 h-10 rounded-xl bg-white border-[0.5px] border-[var(--border-medium)] hover:border-[var(--border-strong)] flex items-center justify-center shadow-sm transition-all duration-200",children:s.jsx(R,{className:"w-5 h-5 text-[var(--fg-secondary)]",strokeWidth:2})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-2xl font-semibold text-[var(--fg-primary)] tracking-tight",children:"ðŸ§ª Tests QA Roadmap #3"}),s.jsx("p",{className:"text-sm text-[var(--fg-tertiary)] mt-1",children:"Tests automatisÃ©s backend + frontend"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[s.jsxs("div",{className:"bg-white rounded-xl p-4 border-[0.5px] border-[var(--border-subtle)] shadow-sm text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-[var(--success-500)]",children:T}),s.jsx("div",{className:"text-xs text-[var(--fg-tertiary)] mt-1",children:"PassÃ©s"})]}),s.jsxs("div",{className:"bg-white rounded-xl p-4 border-[0.5px] border-[var(--border-subtle)] shadow-sm text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-[var(--error-500)]",children:q}),s.jsx("div",{className:"text-xs text-[var(--fg-tertiary)] mt-1",children:"Ã‰chouÃ©s"})]}),s.jsxs("div",{className:"bg-white rounded-xl p-4 border-[0.5px] border-[var(--border-subtle)] shadow-sm text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-[var(--fg-primary)]",children:I}),s.jsx("div",{className:"text-xs text-[var(--fg-tertiary)] mt-1",children:"Total"})]})]}),s.jsx(p,{variant:"primary",onClick:A,disabled:v,className:"w-full h-12 text-sm font-semibold bg-gradient-to-br from-[var(--primary-500)] to-[var(--primary-600)] hover:from-[var(--primary-600)] hover:to-[var(--primary-700)] text-white rounded-xl shadow-lg shadow-[var(--primary-500)]/20 transition-all duration-200 mb-6",children:v?s.jsxs(s.Fragment,{children:[s.jsx(k,{className:"w-4 h-4 animate-spin",strokeWidth:2}),"Tests en cours..."]}):s.jsxs(s.Fragment,{children:[s.jsx(W,{className:"w-4 h-4",strokeWidth:2}),"Lancer tous les tests"]})}),s.jsx("div",{className:"space-y-3",children:n.map((r,i)=>s.jsx("div",{className:`bg-white rounded-2xl p-4 border-[0.5px] ${r.status==="passed"?"border-[var(--success-200)] bg-gradient-to-br from-[var(--success-50)] to-white":r.status==="failed"?"border-[var(--error-200)] bg-gradient-to-br from-[var(--error-50)] to-white":r.status==="running"?"border-[var(--primary-200)] bg-gradient-to-br from-[var(--primary-50)] to-white":"border-[var(--border-subtle)]"} shadow-sm transition-all duration-200`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[C(r.status),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[s.jsx("h3",{className:"text-sm font-semibold text-[var(--fg-primary)]",children:r.name}),r.duration&&s.jsxs("span",{className:"text-xs text-[var(--fg-tertiary)] whitespace-nowrap",children:[r.duration,"ms"]})]}),r.details&&s.jsx("p",{className:"text-xs text-[var(--fg-tertiary)]",children:r.details}),r.error&&s.jsxs("p",{className:"text-xs text-[var(--error-500)] mt-1",children:["âŒ ",r.error]})]})]})},i))}),s.jsxs("div",{className:"mt-8 p-5 bg-[var(--bg-subtle)] rounded-2xl border-[0.5px] border-[var(--border-subtle)]",children:[s.jsx("h3",{className:"text-sm font-semibold text-[var(--fg-primary)] mb-3",children:"ðŸ› ï¸ Actions rapides"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs(p,{variant:"secondary",onClick:()=>x("test-setup"),className:"text-xs",children:[s.jsx(F,{className:"w-4 h-4",strokeWidth:2}),"Setup donnÃ©es"]}),s.jsx(p,{variant:"secondary",onClick:()=>x("smart-suggestions",{squadId:"test-squad-123"}),className:"text-xs",children:"Tester Suggestions"})]})]})]})})}export{Q as QATestsScreen,Q as default};
