import{J as N,r as x,Q as k,j as e,m as d,C as q}from"./index-D_HhqbxM.js";import{d as y}from"./mockData-CmE002oF.js";import{A as B}from"./arrow-left-CFku1NrH.js";import{A as v}from"./award-CpKCxfGh.js";import{C}from"./crown-CCWAShGM.js";import{S as b}from"./star-D0wuE4O_.js";function U({onNavigate:g,showToast:l,useMockData:u=!1}){const{userProfile:o}=N(),[c,p]=x.useState(["1","2","3"]),[a,m]=x.useState([]);x.useEffect(()=>{u?(m(y),p(y.filter(r=>r.equipped).map(r=>r.id))):j()},[u]);const j=async()=>{var r;if(o!=null&&o.id)try{const n=(((r=(await k.getUserStats(o.id)).stats)==null?void 0:r.badges)||[]).map(t=>({id:t.id,name:t.name,description:t.description,rarity:t.rarity,unlocked:!0,equipped:!1,unlockedAt:t.unlockedAt,bg:t.rarity==="legendary"?"bg-[var(--warning-50)]":t.rarity==="epic"?"bg-[var(--primary-50)]":t.rarity==="rare"?"bg-[var(--secondary-50)]":"bg-[var(--bg-subtle)]",color:t.rarity==="legendary"?"text-[var(--warning-600)]":t.rarity==="epic"?"text-[var(--primary-600)]":t.rarity==="rare"?"text-[var(--secondary-600)]":"text-[var(--fg-secondary)]"}));m(n)}catch(i){console.error("Error loading badges:",i),m([])}},w=r=>{var i;if(!((i=a.find(s=>s.id===r))!=null&&i.unlocked)){l("Badge non dÃ©bloquÃ©","error");return}p(s=>s.includes(r)?s.filter(n=>n!==r):s.length>=3?(l("Maximum 3 badges Ã©quipÃ©s","error"),s):[...s,r]),l("Badge Ã©quipÃ© mis Ã  jour","success")},h=a.filter(r=>r.unlocked).length,f=a.length>0?Math.round(h/a.length*100):0;return e.jsx("div",{className:"min-h-screen pb-24 pt-safe",children:e.jsxs("div",{className:"px-4 py-8 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("button",{onClick:()=>g("profile"),className:"w-12 h-12 rounded-2xl bg-white border-[0.5px] border-[var(--border-medium)] flex items-center justify-center hover:border-[var(--border-strong)] shadow-sm transition-all",children:e.jsx(B,{className:"w-5 h-5 text-[var(--fg-primary)]",strokeWidth:2})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-[var(--fg-primary)] tracking-tight",children:"Collection de Badges"}),e.jsxs("p",{className:"text-sm text-[var(--fg-tertiary)] font-medium mt-1",children:[h,"/",a.length," dÃ©bloquÃ©s Â· ",c.length,"/3 Ã©quipÃ©s"]})]})]}),e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-[var(--primary-500)] to-[var(--secondary-500)] rounded-2xl p-6 mb-8 shadow-lg",children:[e.jsx("div",{className:"text-white/90 text-sm font-semibold mb-4",children:"Badges affichÃ©s sur ton profil"}),e.jsx("div",{className:"flex gap-3",children:[0,1,2].map(r=>{const i=a.find(s=>s.id===c[r]);return e.jsx("div",{className:"flex-1",children:i?e.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/20 backdrop-blur-sm flex items-center justify-center mx-auto mb-2",children:e.jsx(v,{className:"w-6 h-6 text-white",strokeWidth:2})}),e.jsx("div",{className:"text-xs text-white font-semibold",children:i.name})]}):e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 text-center border-2 border-dashed border-white/20",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mx-auto mb-2",children:e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/10"})}),e.jsxs("div",{className:"text-xs text-white/60 font-medium",children:["Emplacement ",r+1]})]})},r)})})]}),e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl p-5 mb-6 border-[0.5px] border-[var(--border-subtle)] shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-sm font-semibold text-[var(--fg-primary)]",children:"Progression globale"}),e.jsxs("div",{className:"text-2xl font-bold text-[var(--primary-500)]",children:[f,"%"]})]}),e.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx(d.div,{className:"h-full bg-gradient-to-r from-[var(--primary-500)] to-[var(--secondary-500)] rounded-full",initial:{width:0},animate:{width:`${f}%`},transition:{duration:1,ease:"easeOut"}})})]}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"bg-[var(--primary-50)] rounded-2xl p-4 mb-6 border-[0.5px] border-[var(--primary-100)]",children:e.jsx("div",{className:"text-sm text-[var(--fg-secondary)] font-medium",children:"ðŸ’¡ Ã‰quipe jusqu'Ã  3 badges sur ton profil pour montrer tes accomplissements"})}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:a.map((r,i)=>{const s=r.rarity==="legendary"?C:r.rarity==="epic"?b:r.rarity==="rare"?v:b,n=c.includes(r.id);return e.jsxs(d.button,{onClick:()=>w(r.id),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:i*.05},className:`bg-white rounded-2xl p-5 border-[0.5px] shadow-sm hover:shadow-md transition-all duration-200 text-left relative ${r.unlocked?n?"border-[var(--primary-500)] ring-2 ring-[var(--primary-100)]":"border-[var(--border-subtle)]":"border-[var(--border-subtle)] opacity-60"}`,children:[n&&r.unlocked&&e.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 rounded-full bg-[var(--success-500)] flex items-center justify-center",children:e.jsx(q,{className:"w-4 h-4 text-white",strokeWidth:3})}),e.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center mb-3 ${r.unlocked?r.bg:"bg-gray-100"}`,children:e.jsx(s,{className:`w-7 h-7 ${r.unlocked?r.color:"text-gray-400"}`,strokeWidth:2})}),e.jsx("div",{className:"text-sm font-semibold text-[var(--fg-primary)] mb-1",children:r.name}),e.jsx("div",{className:"text-xs text-[var(--fg-tertiary)] font-medium mb-3",children:r.description}),r.unlocked?e.jsx("div",{className:"text-xs text-[var(--success-500)] font-semibold",children:n?"âœ“ Ã‰quipÃ©":"DÃ©bloquÃ©"}):e.jsx("div",{className:"text-xs text-[var(--fg-tertiary)] font-semibold",children:"ðŸ”’ VerrouillÃ©"})]},r.id)})})]})})}export{U as BadgesScreen,U as default};
