import{u as $,r as j,j as e,m,I as b,E as I,B as E,N as k,W as A}from"./index-D_HhqbxM.js";import{L as a}from"./loader-circle-VeWgTqnN.js";import{A as F}from"./arrow-left-CFku1NrH.js";import{M as D}from"./message-square-CqZ0ARZx.js";import{L as p}from"./link-2-BnTErAaC.js";import{T as S}from"./target-B7vXcHB_.js";import{S as L}from"./sparkles-CBkY3RwN.js";const H="cwtoprbowdqcemdjrtir",y=`https://${H}.supabase.co/functions/v1/make-server-e884809f`,N={async getUserIntegrations(l){const r=await fetch(`${y}/user/integrations`,{method:"GET",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});if(!r.ok){const o=await r.json();throw new Error(o.error||"Failed to get integrations")}return(await r.json()).integrations},async connectIntegration(l,r,d){const o=await fetch(`${y}/user/integrations/${r}/connect`,{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify(d)});if(!o.ok){const x=await o.json();throw new Error(x.error||"Failed to connect integration")}return(await o.json()).integrations},async disconnectIntegration(l,r){const d=await fetch(`${y}/user/integrations/${r}/disconnect`,{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});if(!d.ok){const t=await d.json();throw new Error(t.error||"Failed to disconnect integration")}return(await d.json()).integrations}};function M({onNavigate:l,showToast:r,useMockData:d=!1}){const{getAccessToken:o}=$(),[t,x]=j.useState(null),[C,w]=j.useState(!0),[s,u]=j.useState(null);j.useEffect(()=>{if(d){x({discord:{connected:!0,username:"GamerPro#1234"},googleCalendar:{connected:!0,email:"player@example.com"},twitch:{connected:!1,username:""},steam:{connected:!0,username:"GamerPro"},riot:{connected:!1,username:""},battlenet:{connected:!1,username:""}}),w(!1);return}W()},[d]);const W=async()=>{const n=await o();if(!n){w(!1);return}try{const i=await N.getUserIntegrations(n);x(i)}catch(i){console.error("Error loading integrations:",i),r("Erreur lors du chargement des int√©grations","error"),x({discord:{connected:!1,username:""},googleCalendar:{connected:!1,email:""},twitch:{connected:!1,username:""},steam:{connected:!1,username:""},riot:{connected:!1,username:""},battlenet:{connected:!1,username:""}})}finally{w(!1)}},h=async(n,i)=>{const f=await o();if(!(!f||!t)){u(n);try{if(n==="discord"||n==="google"){r(`Redirection vers ${i}...`,"info");const c=await fetch(`https://${A}.supabase.co/functions/v1/make-server-e884809f/oauth/${n}/authorize`,{method:"GET",headers:{Authorization:`Bearer ${f}`}});if(!c.ok)throw new Error("Failed to get OAuth URL");const v=await c.json();if(v.authUrl){window.location.href=v.authUrl;return}}else{r(`Connexion √† ${i} en cours...`,"info"),await new Promise(v=>setTimeout(v,1500));const c=await N.connectIntegration(f,n,{username:`user_${n}`});x(c),r(`${i} connect√© avec succ√®s !`,"success")}}catch(c){console.error("Connection error:",c),r(`Erreur lors de la connexion √† ${i}`,"error")}finally{u(null)}}},g=async(n,i)=>{const f=await o();if(!(!f||!t)){u(n);try{const c=await N.disconnectIntegration(f,n);x(c),r(`${i} d√©connect√©`,"info")}catch(c){console.error("Disconnection error:",c),r(`Erreur lors de la d√©connexion de ${i}`,"error")}finally{u(null)}}};return C?e.jsx("div",{className:"min-h-screen pb-24 pt-safe flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(a,{className:"w-8 h-8 text-[var(--primary-500)] animate-spin mx-auto mb-4",strokeWidth:2}),e.jsx("p",{className:"text-sm text-[var(--fg-tertiary)] font-medium",children:"Chargement des int√©grations..."})]})}):t?e.jsx("div",{className:"min-h-screen pb-24 pt-safe",children:e.jsxs("div",{className:"px-4 py-8 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-10",children:[e.jsx("button",{onClick:()=>l("profile"),className:"w-12 h-12 rounded-2xl bg-white border-[0.5px] border-[var(--border-medium)] flex items-center justify-center hover:border-[var(--border-strong)] shadow-sm transition-all",children:e.jsx(F,{className:"w-5 h-5 text-[var(--fg-primary)]",strokeWidth:2})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-[var(--fg-primary)] tracking-tight",children:"Int√©grations"}),e.jsx("p",{className:"text-sm text-[var(--fg-tertiary)] font-medium mt-1",children:"Connecte tes plateformes favorites"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-[var(--fg-primary)] mb-4 tracking-tight",children:"üéÆ Plateformes Gaming"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-4 border-[0.5px] border-[var(--border-subtle)] shadow-sm",whileHover:{y:-2},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#5865F2] flex items-center justify-center flex-shrink-0",children:e.jsx(D,{className:"w-6 h-6 text-white",strokeWidth:2})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-bold text-[var(--fg-primary)] mb-0.5",children:"Discord"}),e.jsx("div",{className:"text-xs text-[var(--fg-tertiary)] font-medium",children:t.discord.connected?`‚úì Connect√© ‚Ä¢ ${t.discord.username}`:"Synchronise tes serveurs et notifications"})]}),t.discord.connected?e.jsxs("button",{onClick:()=>g("discord","Discord"),disabled:s==="discord",className:"flex items-center gap-1.5 px-3 py-2 rounded-lg bg-[var(--error-50)] text-[var(--error-500)] text-xs font-semibold hover:bg-[var(--error-100)] transition-colors disabled:opacity-50",children:[s==="discord"?e.jsx(a,{className:"w-4 h-4 animate-spin",strokeWidth:2}):e.jsx(b,{className:"w-4 h-4",strokeWidth:2}),"D√©connecter"]}):e.jsxs("button",{onClick:()=>h("discord","Discord"),disabled:s==="discord",className:"flex items-center gap-1.5 px-3 py-2 rounded-lg bg-[#5865F2] text-white text-xs font-semibold hover:bg-[#4752C4] transition-colors disabled:opacity-50",children:[s==="discord"?e.jsx(a,{className:"w-4 h-4 animate-spin",strokeWidth:2}):e.jsx(p,{className:"w-4 h-4",strokeWidth:2}),"Connecter"]})]})}),e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05},className:"bg-white rounded-2xl p-4 border-[0.5px] border-[var(--border-subtle)] shadow-sm",whileHover:{y:-2},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#9146FF] flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-6 h-6 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-bold text-[var(--fg-primary)] mb-0.5",children:"Twitch"}),e.jsx("div",{className:"text-xs text-[var(--fg-tertiary)] font-medium",children:t.twitch.connected?`‚úì Connect√© ‚Ä¢ ${t.twitch.username}`:"Partage tes sessions en live"})]}),t.twitch.connected?e.jsxs("button",{onClick:()=>g("twitch","Twitch"),disabled:s==="twitch",className:"flex items-center gap-1.5 px-3 py-2 rounded-lg bg-[var(--error-50)] text-[var(--error-500)] text-xs font-semibold hover:bg-[var(--error-100)] transition-colors disabled:opacity-50",children:[s==="twitch"?e.jsx(a,{className:"w-4 h-4 animate-spin",strokeWidth:2}):e.jsx(b,{className:"w-4 h-4",strokeWidth:2}),"D√©connecter"]}):e.jsxs("button",{onClick:()=>h("twitch","Twitch"),disabled:s==="twitch",className:"flex items-center gap-1.5 px-3 py-2 rounded-lg bg-[#9146FF] text-white text-xs font-semibold hover:bg-[#7D3ACF] transition-colors disabled:opacity-50",children:[s==="twitch"?e.jsx(a,{className:"w-4 h-4 animate-spin",strokeWidth:2}):e.jsx(p,{className:"w-4 h-4",strokeWidth:2}),"Connecter"]})]})}),e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl p-4 border-[0.5px] border-[var(--border-subtle)] shadow-sm",whileHover:{y:-2},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#171A21] flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-6 h-6 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M11.979 0C5.678 0 .511 4.86.022 11.037l6.432 2.658c.545-.371 1.203-.59 1.912-.59.063 0 .125.004.188.006l2.861-4.142V8.91c0-2.495 2.028-4.524 4.524-4.524 2.494 0 4.524 2.031 4.524 4.527s-2.03 4.525-4.524 4.525h-.105l-4.076 2.911c0 .052.004.105.004.159 0 1.875-1.515 3.396-3.39 3.396-1.635 0-3.016-1.173-3.331-2.727L.436 15.27C1.862 20.307 6.486 24 11.979 24c6.627 0 11.999-5.373 11.999-12S18.605 0 11.979 0zM7.54 18.21l-1.473-.61c.262.543.714.999 1.314 1.25 1.297.539 2.793-.076 3.332-1.375.263-.63.264-1.319.005-1.949s-.75-1.121-1.377-1.383c-.624-.26-1.29-.249-1.878-.03l1.523.63c.956.4 1.409 1.5 1.009 2.455-.397.957-1.497 1.41-2.454 1.012H7.54zm11.415-9.303c0-1.662-1.353-3.015-3.015-3.015-1.665 0-3.015 1.353-3.015 3.015 0 1.665 1.35 3.015 3.015 3.015 1.663 0 3.015-1.35 3.015-3.015zm-5.273-.005c0-1.252 1.013-2.266 2.265-2.266 1.249 0 2.266 1.014 2.266 2.266 0 1.251-1.017 2.265-2.266 2.265-1.253 0-2.265-1.014-2.265-2.265z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-bold text-[var(--fg-primary)] mb-0.5",children:"Steam"}),e.jsx("div",{className:"text-xs text-[var(--fg-tertiary)] font-medium",children:t.steam.connected?`‚úì Connect√© ‚Ä¢ ${t.steam.username}`:"Importe ta biblioth√®que de jeux"})]}),t.steam.connected?e.jsxs("button",{onClick:()=>g("steam","Steam"),disabled:s==="steam",className:"flex items-center gap-1.5 px-3 py-2 rounded-lg bg-[var(--error-50)] text-[var(--error-500)] text-xs font-semibold hover:bg-[var(--error-100)] transition-colors disabled:opacity-50",children:[s==="steam"?e.jsx(a,{className:"w-4 h-4 animate-spin",strokeWidth:2}):e.jsx(b,{className:"w-4 h-4",strokeWidth:2}),"D√©connecter"]}):e.jsxs("button",{onClick:()=>h("steam","Steam"),disabled:s==="steam",className:"flex items-center gap-1.5 px-3 py-2 rounded-lg bg-[#171A21] text-white text-xs font-semibold hover:bg-[#0E1013] transition-colors disabled:opacity-50",children:[s==="steam"?e.jsx(a,{className:"w-4 h-4 animate-spin",strokeWidth:2}):e.jsx(p,{className:"w-4 h-4",strokeWidth:2}),"Connecter"]})]})}),e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"bg-white rounded-2xl p-4 border-[0.5px] border-[var(--border-subtle)] shadow-sm",whileHover:{y:-2},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#D13639] flex items-center justify-center flex-shrink-0",children:e.jsx(I,{className:"w-6 h-6 text-white",strokeWidth:2})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-bold text-[var(--fg-primary)] mb-0.5",children:"Riot Games"}),e.jsx("div",{className:"text-xs text-[var(--fg-tertiary)] font-medium",children:t.riot.connected?`‚úì Connect√© ‚Ä¢ ${t.riot.username}`:"Valorant, LoL, TFT stats"})]}),t.riot.connected?e.jsxs("button",{onClick:()=>g("riot","Riot Games"),disabled:s==="riot",className:"flex items-center gap-1.5 px-3 py-2 rounded-lg bg-[var(--error-50)] text-[var(--error-500)] text-xs font-semibold hover:bg-[var(--error-100)] transition-colors disabled:opacity-50",children:[s==="riot"?e.jsx(a,{className:"w-4 h-4 animate-spin",strokeWidth:2}):e.jsx(b,{className:"w-4 h-4",strokeWidth:2}),"D√©connecter"]}):e.jsxs("button",{onClick:()=>h("riot","Riot Games"),disabled:s==="riot",className:"flex items-center gap-1.5 px-3 py-2 rounded-lg bg-[#D13639] text-white text-xs font-semibold hover:bg-[#B82D30] transition-colors disabled:opacity-50",children:[s==="riot"?e.jsx(a,{className:"w-4 h-4 animate-spin",strokeWidth:2}):e.jsx(p,{className:"w-4 h-4",strokeWidth:2}),"Connecter"]})]})}),e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl p-4 border-[0.5px] border-[var(--border-subtle)] shadow-sm",whileHover:{y:-2},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#148EFF] flex items-center justify-center flex-shrink-0",children:e.jsx(S,{className:"w-6 h-6 text-white",strokeWidth:2})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-bold text-[var(--fg-primary)] mb-0.5",children:"Battle.net"}),e.jsx("div",{className:"text-xs text-[var(--fg-tertiary)] font-medium",children:t.battlenet.connected?`‚úì Connect√© ‚Ä¢ ${t.battlenet.username}`:"Overwatch, Call of Duty, WoW"})]}),t.battlenet.connected?e.jsxs("button",{onClick:()=>g("battlenet","Battle.net"),disabled:s==="battlenet",className:"flex items-center gap-1.5 px-3 py-2 rounded-lg bg-[var(--error-50)] text-[var(--error-500)] text-xs font-semibold hover:bg-[var(--error-100)] transition-colors disabled:opacity-50",children:[s==="battlenet"?e.jsx(a,{className:"w-4 h-4 animate-spin",strokeWidth:2}):e.jsx(b,{className:"w-4 h-4",strokeWidth:2}),"D√©connecter"]}):e.jsxs("button",{onClick:()=>h("battlenet","Battle.net"),disabled:s==="battlenet",className:"flex items-center gap-1.5 px-3 py-2 rounded-lg bg-[#148EFF] text-white text-xs font-semibold hover:bg-[#1178D6] transition-colors disabled:opacity-50",children:[s==="battlenet"?e.jsx(a,{className:"w-4 h-4 animate-spin",strokeWidth:2}):e.jsx(p,{className:"w-4 h-4",strokeWidth:2}),"Connecter"]})]})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-[var(--fg-primary)] mb-4 tracking-tight",children:"üìÖ Productivit√©"}),e.jsx("div",{className:"space-y-3",children:e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:"bg-white rounded-2xl p-4 border-[0.5px] border-[var(--border-subtle)] shadow-sm",whileHover:{y:-2},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#4285F4] flex items-center justify-center flex-shrink-0",children:e.jsx(E,{className:"w-6 h-6 text-white",strokeWidth:2})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-bold text-[var(--fg-primary)] mb-0.5",children:"Google Calendar"}),e.jsx("div",{className:"text-xs text-[var(--fg-tertiary)] font-medium",children:t.googleCalendar.connected?`‚úì Connect√© ‚Ä¢ ${t.googleCalendar.email||t.googleCalendar.username}`:"Synchronise tes sessions automatiquement"})]}),t.googleCalendar.connected?e.jsxs("button",{onClick:()=>g("googleCalendar","Google Calendar"),disabled:s==="googleCalendar",className:"flex items-center gap-1.5 px-3 py-2 rounded-lg bg-[var(--error-50)] text-[var(--error-500)] text-xs font-semibold hover:bg-[var(--error-100)] transition-colors disabled:opacity-50",children:[s==="googleCalendar"?e.jsx(a,{className:"w-4 h-4 animate-spin",strokeWidth:2}):e.jsx(b,{className:"w-4 h-4",strokeWidth:2}),"D√©connecter"]}):e.jsxs("button",{onClick:()=>h("googleCalendar","Google Calendar"),disabled:s==="googleCalendar",className:"flex items-center gap-1.5 px-3 py-2 rounded-lg bg-[#4285F4] text-white text-xs font-semibold hover:bg-[#357AE8] transition-colors disabled:opacity-50",children:[s==="googleCalendar"?e.jsx(a,{className:"w-4 h-4 animate-spin",strokeWidth:2}):e.jsx(p,{className:"w-4 h-4",strokeWidth:2}),"Connecter"]})]})})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-[var(--fg-primary)] mb-4 tracking-tight",children:"‚ö° Avanc√©"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(m.button,{onClick:()=>l("api-docs"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"w-full bg-white rounded-2xl p-4 flex items-center gap-4 text-left border-[0.5px] border-[var(--border-subtle)] shadow-sm hover:shadow-md transition-all duration-200",whileHover:{y:-2},children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-[var(--primary-50)] flex items-center justify-center",children:e.jsx(L,{className:"w-6 h-6 text-[var(--primary-500)]",strokeWidth:2})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-bold text-[var(--fg-primary)] mb-0.5",children:"API & Webhooks"}),e.jsx("div",{className:"text-xs text-[var(--fg-tertiary)] font-medium",children:"Documentation d√©veloppeur & acc√®s API"})]}),e.jsx(k,{className:"w-5 h-5 text-[var(--fg-tertiary)]",strokeWidth:2})]}),e.jsxs(m.button,{onClick:()=>l("plugins"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.35},className:"w-full bg-white rounded-2xl p-4 flex items-center gap-4 text-left border-[0.5px] border-[var(--border-subtle)] shadow-sm hover:shadow-md transition-all duration-200",whileHover:{y:-2},children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-[var(--secondary-50)] flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-[var(--secondary-500)]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-bold text-[var(--fg-primary)] mb-0.5",children:"Plugins & Extensions"}),e.jsx("div",{className:"text-xs text-[var(--fg-tertiary)] font-medium",children:"√âtends les fonctionnalit√©s de l'app"})]}),e.jsx(k,{className:"w-5 h-5 text-[var(--fg-tertiary)]",strokeWidth:2})]})]})]})]})}):e.jsx("div",{className:"min-h-screen pb-24 pt-safe flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-[var(--fg-tertiary)] font-medium",children:"Erreur de chargement"})})})}export{M as IntegrationsScreen,M as default};
